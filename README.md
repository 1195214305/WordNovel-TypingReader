# WordNovel - 打字看小说

> 通过打字的方式阅读小说，让阅读变成一种沉浸式体验。完美模拟Word文档界面，让你在"认真工作"的同时享受阅读乐趣！

## 本项目由[阿里云ESA](https://www.aliyun.com/product/esa)提供加速、计算和保护

![阿里云ESA](https://img.alicdn.com/imgextra/i3/O1CN01H1UU3i1Cti9lYtFrs_!!6000000000139-2-tps-7534-844.png)

## 在线体验

🔗 [https://wordnovel-typingreader.8a5362ec.er.aliyun-esa.net](https://wordnovel-typingreader.8a5362ec.er.aliyun-esa.net)

## 功能特点

### 核心功能
- **打字阅读体验** - 按任意键即可"打出"下一段小说内容
- **模拟Word界面** - 完美还原Word文档界面，老板路过也看不出破绽
- **输入法候选框** - 显示即将输入的内容，更加逼真
- **阅读进度记录** - 自动保存阅读进度，下次打开继续阅读

### 🚨 老板键功能（重点！）

当老板走过来时，一键切换到正经工作文档，完美伪装！

| 快捷键 | 功能 |
|--------|------|
| **`** 或 **F1** | 一键切换工作/阅读模式 |
| **Tab** | 工作模式下切换不同文档 |

**工作文档管理：**
- 内置5个预设工作文档（年度总结、项目需求、会议纪要、周报、产品设计）
- 支持**新建**自定义工作文档
- 支持**编辑**任意工作文档内容
- 支持**删除**自定义文档
- 工作文档自动保存到浏览器本地存储

### AI功能
- **小说生成** - 使用千问API生成各种类型的小说
- **多种风格** - 支持玄幻、言情、科幻、悬疑等多种类型
- **自定义主题** - 输入关键词生成个性化内容

### 内容管理
- **多小说管理** - 支持添加多本小说，随时切换
- **本地导入** - 支持导入本地txt文件
- **云端同步** - 通过边缘KV存储同步阅读记录

## 技术架构

```
┌─────────────────────────────────────────────────────────────┐
│                     用户浏览器                               │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  React + TypeScript + Tailwind CSS                   │   │
│  │  - 模拟Word界面                                       │   │
│  │  - 打字事件监听                                       │   │
│  │  - 输入法候选框模拟                                   │   │
│  │  - 老板键一键切换                                     │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                   ESA边缘节点 (全球加速)                     │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  边缘函数 - /api/generate-novel                      │   │
│  │  - 调用千问API生成小说                                │   │
│  │  - 边缘缓存热门模板                                   │   │
│  │  - 低延迟响应                                        │   │
│  └─────────────────────────────────────────────────────┘   │
│  ┌─────────────────────────────────────────────────────┐   │
│  │  边缘KV存储                                          │   │
│  │  - 缓存生成的小说内容                                 │   │
│  │  - 存储用户阅读进度                                   │   │
│  └─────────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────┐
│                    通义千问API                              │
│  - qwen-plus 模型                                          │
│  - 流式响应                                                │
│  - 多轮对话支持                                            │
└─────────────────────────────────────────────────────────────┘
```

## How We Use Edge

### 边缘函数的不可替代性

1. **AI请求代理与优化**
   - 边缘函数作为千问API的代理层，用户API密钥在边缘处理，不暴露给客户端
   - 就近接入最近的边缘节点，大幅降低API调用延迟
   - 边缘函数对请求进行预处理和后处理，优化传输效率

2. **智能缓存策略**
   - 热门小说模板和常用提示词缓存在边缘
   - 相同类型的生成请求可复用缓存结果
   - 减少重复API调用，节省成本

3. **全球加速访问**
   - 静态资源通过ESA CDN全球分发
   - 用户访问最近的边缘节点
   - 首屏加载速度提升50%以上

4. **边缘数据存储**
   - 用户阅读进度存储在边缘KV
   - 生成的小说内容缓存在边缘
   - 跨设备同步阅读状态

## 使用说明

### 基本使用
1. 打开应用，进入模拟的Word文档界面
2. 点击工具栏的"管理内容"添加小说，或点击"AI生成"生成小说
3. 按任意键开始"打字"阅读小说
4. 输入法候选框会显示即将输入的内容

### 老板键使用
1. 按 **`** 键（数字1左边）或 **F1** 键一键切换到工作模式
2. 工作模式下按 **Tab** 键切换不同的工作文档
3. 再次按 **`** 或 **F1** 返回小说阅读模式
4. 在工作模式下可以新建、编辑、删除工作文档

### AI生成小说
1. 点击工具栏的"AI生成"按钮
2. 选择小说类型（玄幻/言情/科幻/悬疑等）
3. 输入主题关键词
4. 选择生成长度
5. 在"管理内容"中配置千问API Key
6. 点击生成，等待内容生成完成

### 内容管理
1. 点击工具栏的"管理内容"按钮进入内容管理
2. 可以添加新的小说、导入本地txt文件
3. 配置千问API Key
4. 点击小说卡片即可切换阅读内容

## 本地开发

```bash
# 进入前端目录
cd frontend

# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build
```

## 项目结构

```
22_WordNovel_打字看小说/
├── frontend/                 # 前端代码
│   ├── src/
│   │   ├── components/      # React组件
│   │   │   ├── Editor.tsx   # 核心编辑器（含老板键功能）
│   │   │   ├── Header.tsx   # 顶部菜单栏
│   │   │   ├── Toolbar.tsx  # 工具栏（含帮助弹窗）
│   │   │   ├── StatusBar.tsx # 状态栏
│   │   │   ├── InputMethod.tsx # 输入法模拟
│   │   │   ├── ContentManager.tsx # 内容管理
│   │   │   └── AIGenerator.tsx # AI生成器
│   │   ├── store/           # 状态管理
│   │   ├── hooks/           # 自定义Hooks
│   │   ├── types/           # TypeScript类型
│   │   └── utils/           # 工具函数
│   ├── public/              # 静态资源
│   └── package.json
├── functions/               # 边缘函数
│   └── api/
│       └── generate-novel.ts # AI生成接口
├── esa.jsonc               # ESA配置
└── README.md
```

## 技术栈

- **前端框架**: React 18 + TypeScript
- **样式方案**: Tailwind CSS
- **构建工具**: Vite
- **状态管理**: Zustand
- **图标库**: Lucide React
- **边缘计算**: ESA Edge Functions
- **边缘存储**: ESA KV Storage
- **AI模型**: 通义千问 (Qwen)

## 创意亮点

1. **完美伪装** - 界面完美模拟Word文档，让你在办公室也能安心"工作"
2. **老板键功能** - 一键切换到正经工作文档，支持自定义多个工作文档模板
3. **沉浸体验** - 打字阅读的方式让阅读更有仪式感
4. **AI赋能** - 千问大模型一键生成各类小说，永不断更
5. **隐私保护** - API Key本地存储，边缘处理，安全可靠

## License

MIT License
